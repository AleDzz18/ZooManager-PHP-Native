# =============================================================
# ARCHIVO DE CONFIGURACIÓN DEL SERVIDOR (.htaccess)
# =============================================================

# 1. EVITAR LISTADO DE DIRECTORIOS
# Si falta un index.php, evita que se vean los archivos de la carpeta.
Options -Indexes

# 2. PROTEGER ARCHIVOS SENSIBLES (BLINDAJE)
# Usamos una expresión regular para bloquear acceso a:
# - .htaccess, .htpasswd (Configuración del servidor)
# - .git, .gitignore (Control de versiones)
# - .env, .env.example (Variables de entorno)
# - composer.json, package.json (Dependencias)
# - digest.txt (Tu resumen de código)
<FilesMatch "^\.(htaccess|htpasswd|git|env|installed)|^(composer|package)\.(json|lock)|digest\.txt$">
    Order Allow,Deny
    Deny from all
</FilesMatch>

# PROTEGER ARCHIVOS DE CONFIGURACION PHP (db.php, etc.)
<FilesMatch "^(db|db_example)\.php$">
    Order Allow,Deny
    Deny from all
</FilesMatch>

# 3. PÁGINAS DE ERROR PERSONALIZADAS
# Redirigimos al usuario a nuestras vistas bonitas cuando algo falla.
ErrorDocument 403 /zoo-system/views/errors/403.php
ErrorDocument 404 /zoo-system/views/errors/404.php
ErrorDocument 500 /zoo-system/views/errors/500.php
ErrorDocument 503 /zoo-system/views/errors/500.php

# 4. SEGURIDAD ADICIONAL (HEADERS)
<IfModule mod_headers.c>
    # Evita que tu web sea incrustada en un iframe de otro sitio (Anti-Clickjacking)
    Header set X-Frame-Options "SAMEORIGIN"
    
    # Evita que el navegador "adivine" el tipo de archivo (Seguridad MIME)
    Header set X-Content-Type-Options "nosniff"
    
    # Activa la protección XSS básica del navegador (si está disponible)
    Header set X-XSS-Protection "1; mode=block"
</IfModule>

# 5. OCULTAR FIRMA DEL SERVIDOR
# Evita que los hackers sepan qué versión exacta de Apache/PHP usas.
ServerSignature Off