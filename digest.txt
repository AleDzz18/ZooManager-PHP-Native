Directory structure:
‚îî‚îÄ‚îÄ zoo-system/
    ‚îú‚îÄ‚îÄ README.md
    ‚îú‚îÄ‚îÄ index.php
    ‚îú‚îÄ‚îÄ actions/
    ‚îÇ   ‚îú‚îÄ‚îÄ animals/
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ animal_create_action.php
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ animal_delete.php
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ animal_update_action.php
    ‚îÇ   ‚îî‚îÄ‚îÄ auth/
    ‚îÇ       ‚îú‚îÄ‚îÄ login_action.php
    ‚îÇ       ‚îú‚îÄ‚îÄ logout.php
    ‚îÇ       ‚îî‚îÄ‚îÄ register_action.php
    ‚îú‚îÄ‚îÄ assets/
    ‚îÇ   ‚îî‚îÄ‚îÄ css/
    ‚îÇ       ‚îî‚îÄ‚îÄ style.css
    ‚îú‚îÄ‚îÄ includes/
    ‚îÇ   ‚îú‚îÄ‚îÄ auth_check.php
    ‚îÇ   ‚îú‚îÄ‚îÄ footer.php
    ‚îÇ   ‚îú‚îÄ‚îÄ functions.php
    ‚îÇ   ‚îî‚îÄ‚îÄ header.php
    ‚îî‚îÄ‚îÄ views/
        ‚îú‚îÄ‚îÄ admin/
        ‚îÇ   ‚îú‚îÄ‚îÄ animal_create.php
        ‚îÇ   ‚îú‚îÄ‚îÄ animal_edit.php
        ‚îÇ   ‚îî‚îÄ‚îÄ animals.php
        ‚îî‚îÄ‚îÄ auth/
            ‚îú‚îÄ‚îÄ login.php
            ‚îî‚îÄ‚îÄ register.php

================================================
FILE: README.md
================================================
# ZooManager-PHP-Native
ZooManager: A comprehensive system in native PHP for zoo management. It includes secure authentication, user roles, and a complete CRUD interface for habitats and animals. It implements complex business logic for capacity control and species compatibility, a relational database, and a clean architecture ideal for academic defense.

ü¶Å ZooManager: Sistema de Gesti√≥n de Zool√≥gico
Bienvenido al repositorio oficial del proyecto. Este sistema ha sido dise√±ado para cumplir con los est√°ndares acad√©micos de desarrollo en PHP Nativo, enfoc√°ndose en la seguridad, la integridad de los datos y una arquitectura limpia.

üõ†Ô∏è Requisitos T√©cnicos Implementados
Para cumplir con la actividad, el proyecto incluye:

Autenticaci√≥n: Registro de usuarios, inicio de sesi√≥n con contrase√±as encriptadas y manejo de sesiones seguras.

CRUD Completo: Gesti√≥n de la entidad principal (Animales) con operaciones de Crear, Leer, Actualizar y Eliminar (con confirmaci√≥n).

Base de Datos: Estructura relacional con 4 tablas vinculadas mediante llaves primarias y for√°neas.

Arquitectura: Organizaci√≥n modular de carpetas para separar la l√≥gica de procesamiento (actions/) de la interfaz visual (views/).

üß† Regla de Negocio Compleja (Validaci√≥n Especial)
Nuestro diferencial y requisito obligatorio es la Validaci√≥n de Capacidad y Compatibilidad:

Validaci√≥n de Capacidad: Antes de registrar un animal, el sistema consulta la tabla habitats para verificar si hay cupo disponible.

Validaci√≥n de Clima: Se cruza la informaci√≥n entre la especie y el tipo de h√°bitat. No se permite asignar un animal a un entorno que no sea compatible con su clima biol√≥gico.

üìÇ Gu√≠a de Estructura para Programadores
Para mantener el orden, sigamos estas reglas:

Vistas (/views): Solo contienen HTML y echo de PHP para mostrar datos. No procesan formularios.

Acciones (/actions): Aqu√≠ va la l√≥gica pura. Reciben datos por POST, validan, ejecutan SQL y redireccionan.


Seguridad: Toda p√°gina administrativa debe incluir el archivo auth_check.php al inicio para verificar la sesi√≥n activa.

üöÄ C√≥mo empezar
Clona el repositorio en tu carpeta local del servidor (ej. htdocs).

Crea el archivo config/db.php (no se sube al repo por seguridad) con tus credenciales locales.


================================================
FILE: index.php
================================================
<?php 
require 'includes/header.php'; // Carga el men√∫ y el CSS
?>

<div style="text-align: center; padding: 50px 0;">
    <h1>ü¶Å Bienvenido al Sistema ZooManager</h1>
    <p>Gesti√≥n integral de h√°bitats y animales.</p>
    
    <?php if (!isset($_SESSION['user_id'])): ?>
        <p>Por favor, inicia sesi√≥n para gestionar el zool√≥gico.</p>
    <?php else: ?>
        <p>Sistema listo para operar.</p>
    <?php endif; ?>
</div>

<?php 
require 'includes/footer.php'; // Carga el pie de p√°gina
?>


================================================
FILE: actions/animals/animal_create_action.php
================================================
<?php
session_start();
require_once '../../config/db.php';

// 1. VERIFICAR M√âTODO POST
if ($_SERVER['REQUEST_METHOD'] === 'POST') {

    // 2. CAPTURAR DATOS
    $nombre = trim($_POST['nombre']);
    $especie = trim($_POST['especie']);
    $edad = $_POST['edad'];
    $fecha = $_POST['fecha_llegada'];
    $habitat_id = $_POST['habitat_id'];

    // 3. VALIDACI√ìN B√ÅSICA
    if (empty($nombre) || empty($especie) || empty($habitat_id)) {
        $_SESSION['error'] = "Por favor completa todos los campos obligatorios.";
        header("Location: ../../views/admin/animal_create.php");
        exit();
    }

    try {
        // 4. INSERTAR EN BASE DE DATOS
        // F√≠jate que usamos "?" para evitar inyecci√≥n SQL.
        $sql = "INSERT INTO animals (nombre, especie, edad, fecha_llegada, habitat_id) 
                VALUES (?, ?, ?, ?, ?)";
        
        $stmt = $pdo->prepare($sql);
        $stmt->execute([$nombre, $especie, $edad, $fecha, $habitat_id]);

        // 5. REDIRECCIONAR CON √âXITO
        // No creamos mensaje de √©xito en sesi√≥n todav√≠a para no complicar, 
        // pero volvemos a la lista para ver el nuevo animal.
        header("Location: ../../views/admin/animals.php");
        exit();

    } catch (PDOException $e) {
        // Manejo de error t√©cnico
        $_SESSION['error'] = "Error al guardar: " . $e->getMessage();
        header("Location: ../../views/admin/animal_create.php");
        exit();
    }

} else {
    // Si intentan entrar directo por URL
    header("Location: ../../views/admin/animals.php");
    exit();
}


================================================
FILE: actions/animals/animal_delete.php
================================================
<?php
/*
    ---------------------------------------------------
    L√É‚ÄúGICA DE ELIMINACI√É‚ÄúN (DELETE)
    ---------------------------------------------------
*/
session_start();
require_once '../../config/db.php';
require_once '../../includes/auth_check.php'; // Solo usuarios logueados borran

// 1. OBTENER EL ID POR URL
// El ID viene de: animal_delete.php?id=5
$id = isset($_GET['id']) ? $_GET['id'] : null;

if ($id) {
    try {
        // 2. PREPARAR LA ELIMINACI√É‚ÄúN
        $sql = "DELETE FROM animals WHERE id = ?";
        $stmt = $pdo->prepare($sql);
        
        // 3. EJECUTAR
        if ($stmt->execute([$id])) {
            $_SESSION['success'] = "Animal eliminado correctamente.";
        } else {
            $_SESSION['error'] = "No se pudo eliminar el registro.";
        }

    } catch (PDOException $e) {
        $_SESSION['error'] = "Error de base de datos: " . $e->getMessage();
    }
}

// 4. REDIRECCIONAR DE VUELTA A LA LISTA
header("Location: ../../views/admin/animals.php");
exit();
?>


================================================
FILE: actions/animals/animal_update_action.php
================================================
<?php
session_start();
require_once '../../config/db.php';

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $id = $_POST['id'];
    $nombre = trim($_POST['nombre']);
    $especie = trim($_POST['especie']);
    $edad = $_POST['edad'];
    $fecha = $_POST['fecha_llegada'];
    $habitat_id = $_POST['habitat_id'];

    try {
        // Usamos la sentencia UPDATE con WHERE id = ?
        $sql = "UPDATE animals SET nombre = ?, especie = ?, edad = ?, fecha_llegada = ?, habitat_id = ? WHERE id = ?";
        $stmt = $pdo->prepare($sql);
        $stmt->execute([$nombre, $especie, $edad, $fecha, $habitat_id, $id]);

        $_SESSION['success'] = "Animal actualizado correctamente.";
        header("Location: ../../views/admin/animals.php");
        exit();

    } catch (PDOException $e) {
        die("Error al actualizar: " . $e->getMessage());
    }
}


================================================
FILE: actions/auth/login_action.php
================================================
<?php
// 1. INICIAR SESI√ìN
// Necesario para guardar los datos del usuario si el login es exitoso.
session_start();

// 2. CONEXI√ìN A LA BASE DE DATOS
require_once '../../config/db.php';

// 3. VERIFICAR M√âTODO POST
// Solo procesamos si los datos vienen del formulario.
if ($_SERVER['REQUEST_METHOD'] === 'POST') {

    // 4. LIMPIEZA DE DATOS
    // Usamos trim() para quitar espacios accidentales.
    $email = trim($_POST['email']);
    $password_ingresada = $_POST['password'];

    // 5. VALIDACI√ìN DE CAMPOS VAC√çOS
    if (empty($email) || empty($password_ingresada)) {
        $_SESSION['error'] = "Por favor, completa todos los campos.";
        header("Location: ../../views/auth/login.php");
        exit();
    }

    try {
        // 6. BUSCAR AL USUARIO POR EMAIL
        // Preparamos la consulta SQL para evitar inyecci√≥n de c√≥digo.
        $stmt = $pdo->prepare("SELECT * FROM users WHERE email = ?");
        $stmt->execute([$email]);
        
        // fetch(PDO::FETCH_ASSOC) nos devuelve los datos del usuario como un array asociativo.
        $usuario = $stmt->fetch(PDO::FETCH_ASSOC);

        // 7. VERIFICACI√ìN DE CREDENCIALES
        // Revisamos dos cosas:
        // A) ¬øExiste el usuario? ($usuario no es falso)
        // B) ¬øLa contrase√±a coincide? Usamos password_verify() que compara texto plano vs hash.
        if ($usuario && password_verify($password_ingresada, $usuario['password'])) {
            
            // --- ¬°LOGIN EXITOSO! ---

            // 8. GUARDAR DATOS EN LA SESI√ìN
            // Estas variables estar√°n disponibles en TODAS las p√°ginas (header.php las usa).
            $_SESSION['user_id'] = $usuario['id'];
            $_SESSION['user_name'] = $usuario['nombre_completo'];
            $_SESSION['user_role'] = $usuario['rol']; // Importante para permisos de Admin/Cuidador

            // 9. REDIRECCIONAR AL DASHBOARD
            // Por ahora vamos al inicio, pero luego iremos al panel de administraci√≥n.
            header("Location: ../../index.php");
            exit();

        } else {
            // --- LOGIN FALLIDO ---
            
            // Nota de Seguridad: No decimos "El usuario no existe" o "La contrase√±a est√° mal".
            // Decimos "Credenciales incorrectas" para no dar pistas a hackers.
            $_SESSION['error'] = "Credenciales incorrectas. Int√©ntalo de nuevo.";
            header("Location: ../../views/auth/login.php");
            exit();
        }

    } catch (PDOException $e) {
        // 10. ERROR T√âCNICO
        die("Error en el sistema de login: " . $e->getMessage());
    }

} else {
    // Si intentan entrar directo por URL, los devolvemos al formulario.
    header("Location: ../../views/auth/login.php");
    exit();
}


================================================
FILE: actions/auth/logout.php
================================================
<?php
// 1. INICIAR LA SESI√É‚ÄúN
// Aunque suene contradictorio, necesitamos "entrar" a la sesi√É¬≥n actual para poder destruirla.
session_start();

// 2. LIMPIAR TODAS LAS VARIABLES DE SESI√É‚ÄúN
// Vaciamos el array $_SESSION para borrar datos como el ID, nombre y rol de la memoria inmediata.
$_SESSION = [];

// 3. DESTRUIR LA COOKIE DE SESI√É‚ÄúN (Limpieza profunda)
// Esto borra la "llave" f√É¬≠sica que estaba guardada en el navegador del usuario.
if (ini_get("session.use_cookies")) {
    $params = session_get_cookie_params();
    setcookie(session_name(), '', time() - 42000,
        $params["path"], $params["domain"],
        $params["secure"], $params["httponly"]
    );
}

// 4. DESTRUIR LA SESI√É‚ÄúN EN EL SERVIDOR
// Esto elimina el archivo f√É¬≠sico en el servidor donde se guardaban los datos.
session_destroy();

// 5. REDIRECCIONAR AL LOGIN
// Enviamos al usuario fuera del sistema.
header("Location: ../../views/auth/login.php");
exit();
?>


================================================
FILE: actions/auth/register_action.php
================================================
<?php
// 1. INICIAR SESI√ìN
// La necesitamos para guardar mensajes de error o √©xito que mostraremos en la vista.
session_start();

// 2. IMPORTAR LA CONEXI√ìN (La "llave" del zool√≥gico)
// Usamos ../../ para salir de actions/auth/ y llegar a la carpeta config/
require_once '../../config/db.php';

// 3. VERIFICAR QUE LOS DATOS LLEGUEN POR POST
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    
    // 4. CAPTURAR Y LIMPIAR LOS DATOS
    // trim() elimina espacios vac√≠os accidentales al inicio o final.
    $nombre = trim($_POST['nombre_completo']);
    $email = trim($_POST['email']);
    $password_plana = $_POST['password']; // La clave tal cual la escribi√≥ el usuario
    $rol = $_POST['rol'];

    // 5. VALIDACI√ìN B√ÅSICA (Manejo de errores exigido)
    if (empty($nombre) || empty($email) || empty($password_plana)) {
        $_SESSION['error'] = "Todos los campos son obligatorios.";
        header("Location: ../../views/auth/register.php");
        exit();
    }

    try {
        // 6. VERIFICAR SI EL EMAIL YA EXISTE
        // Usamos una "Consulta Preparada" (PDO) para evitar Inyecci√≥n SQL.
        $stmt = $pdo->prepare("SELECT id FROM users WHERE email = ?");
        $stmt->execute([$email]);
        
        if ($stmt->fetch()) {
            $_SESSION['error'] = "Este correo ya est√° registrado en el sistema.";
            header("Location: ../../views/auth/register.php");
            exit();
        }

        // 7. ENCRIPTAR LA CONTRASE√ëA (Requisito Obligatorio #1)
        // Nunca guardamos claves en texto plano. password_hash crea una versi√≥n ilegible.
        $password_encriptada = password_hash($password_plana, PASSWORD_DEFAULT);

        // 8. INSERTAR EL NUEVO USUARIO
        $sql = "INSERT INTO users (nombre_completo, email, password, rol) VALUES (?, ?, ?, ?)";
        $insert = $pdo->prepare($sql);
        $insert->execute([$nombre, $email, $password_encriptada, $rol]);

        // 9. √âXITO: REDIRECCIONAR AL LOGIN
        $_SESSION['success'] = "Usuario registrado correctamente. Ya puedes iniciar sesi√≥n.";
        header("Location: ../../views/auth/login.php");
        exit();

    } catch (PDOException $e) {
        // 10. MANEJO DE ERRORES CR√çTICOS
        die("Error t√©cnico en la base de datos: " . $e->getMessage());
    }

} else {
    // Si alguien intenta entrar a este archivo directamente por la URL, lo mandamos al registro.
    header("Location: ../../views/auth/register.php");
    exit();
}


================================================
FILE: assets/css/style.css
================================================
/* --- ESTILOS GENERALES --- */
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f4f4f9; /* Color de fondo suave */
    color: #333;
}

.container {
    width: 90%;
    max-width: 1000px; /* Ancho m√É¬°ximo para que no se estire mucho */
    margin: 0 auto;    /* Centrar contenido */
    padding: 20px 0;
}

/* --- BARRA DE NAVEGACI√É‚ÄúN --- */
.main-nav {
    background-color: #2c3e50; /* Azul oscuro corporativo */
    color: white;
    padding: 15px 0;
}

.nav-container {
    display: flex;             /* Pone el logo y el men√É¬∫ en la misma l√É¬≠nea */
    justify-content: space-between;
    align-items: center;
}

.logo {
    font-size: 24px;
    font-weight: bold;
    color: white;
    text-decoration: none;
}

/* --- MEN√É≈° --- */
.menu {
    list-style: none; /* Quita los puntos de la lista */
    margin: 0;
    padding: 0;
    display: flex;    /* Pone los botones uno al lado del otro */
    gap: 20px;        /* Espacio entre botones */
}

.menu a {
    color: #ecf0f1;
    text-decoration: none;
    font-size: 16px;
}

.menu a:hover {
    color: #3498db; /* Azul claro al pasar el mouse */
}

/* --- BOTONES ESPECIALES --- */
.btn-register {
    background-color: #3498db;
    padding: 8px 15px;
    border-radius: 5px;
}

.menu .btn-register:hover {
    color: white; 
    background-color: #154e73;
}

.btn-logout {
    background-color: #e74c3c; /* Rojo para salir */
    padding: 5px 10px;
    border-radius: 4px;
}

/* --- TABLAS (Para el futuro CRUD) --- */
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    background: white;
}

th, td {
    border: 1px solid #ddd;
    padding: 12px;
    text-align: left;
}

th {
    background-color: #2c3e50;
    color: white;
}

/* --- ESTILOS DE FORMULARIOS --- */
.auth-container {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 70vh;
}

.auth-card {
    background: white;
    padding: 30px;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 400px;
}

.form-group {
    margin-bottom: 15px;
}

.form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
}

.form-group input, .form-group select {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box; /* Importante para que el padding no estire el input */
}

.btn-submit {
    width: 100%;
    background-color: #27ae60; /* Verde zool√É¬≥gico */
    color: white;
    padding: 12px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
}

.btn-submit:hover {
    background-color: #219150;
}

.auth-link {
    text-align: center;
    margin-top: 15px;
    font-size: 0.9em;
}

/* --- ESTILOS DE ALERTAS --- */
.alert {
    padding: 12px;
    margin-bottom: 20px;
    border-radius: 4px;
    font-size: 0.9em;
    text-align: center;
    font-weight: bold;
}

.alert-error {
    background-color: #f8d7da; /* Rojo suave */
    color: #721c24;           /* Texto rojo oscuro */
    border: 1px solid #f5c6cb;
}

.alert-success {
    background-color: #d4edda; /* Verde suave */
    color: #155724;           /* Texto verde oscuro */
    border: 1px solid #c3e6cb;
}




================================================
FILE: includes/auth_check.php
================================================
<?php
// 1. VERIFICAR EL ESTADO DE LA SESI√ìN
// Si la sesi√≥n no ha iniciado, la iniciamos para poder leer $_SESSION.
if (session_status() === PHP_SESSION_NONE) {
    session_start();
}

// 2. COMPROBAR SI EL USUARIO EST√Å LOGUEADO
// Verificamos si la variable 'user_id' existe en la sesi√≥n.
if (!isset($_SESSION['user_id'])) {
    
    // 3. MENSAJE DE SEGURIDAD
    // Guardamos un mensaje para mostrarlo en el login.
    $_SESSION['error'] = "Acceso denegado. Debes iniciar sesi√≥n para ver esa p√°gina.";

    // 4. REDIRECCI√ìN FORZADA
    // Enviamos al intruso de vuelta al Login.
    // Nota: Asumimos que este archivo se usa en carpetas tipo views/admin/
    header("Location: ../../views/auth/login.php");
    
    // 5. DETENER EJECUCI√ìN (CR√çTICO)
    // Sin el exit(), el c√≥digo de abajo se seguir√≠a ejecutando en segundo plano
    // aunque el navegador cambie de p√°gina. ¬°Es un hueco de seguridad grave!
    exit();
}
?>


================================================
FILE: includes/footer.php
================================================
        </main> 
        <footer style="text-align: center; margin-top: 50px; padding: 20px; color: #777; font-size: 0.9em;">
            <p>&copy; 2026 ZooManager - Proyecto Universitario PHP Nativo</p>
        </footer>
    </body>
</html>


================================================
FILE: includes/functions.php
================================================
[Empty file]


================================================
FILE: includes/header.php
================================================
<?php
// 1. INICIAR SESI√ìN
if (session_status() === PHP_SESSION_NONE) {
    session_start();
}

// 2. DEFINIR RUTA BASE
define('BASE_URL', 'http://localhost/zoo-system/');
?>

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZooManager - Sistema de Gesti√≥n</title>
    
    <link rel="stylesheet" href="<?php echo BASE_URL; ?>assets/css/style.css">
</head>
<body>

    <nav class="main-nav">
        <div class="container nav-container">
            <a href="<?php echo BASE_URL; ?>index.php" class="logo">ü¶Å ZooSystem</a>

            <ul class="menu">
                
                <?php if (isset($_SESSION['user_id'])): ?>
                    <li><span>Hola, <?php echo htmlspecialchars($_SESSION['user_name']); ?></span></li>
                    <li><a href="<?php echo BASE_URL; ?>views/admin/animals.php">Animales</a></li>
                    <li><a href="<?php echo BASE_URL; ?>views/admin/habitats.php">H√°bitats</a></li>
                    <li><a href="<?php echo BASE_URL; ?>actions/auth/logout.php" class="btn-logout">Salir</a></li>

                <?php else: ?>
                    <li><a href="<?php echo BASE_URL; ?>index.php">Inicio</a></li>
                    <li><a href="<?php echo BASE_URL; ?>views/auth/login.php">Entrar</a></li>
                    <li><a href="<?php echo BASE_URL; ?>views/auth/register.php" class="btn-register">Registrarse</a></li>
                <?php endif; ?>
                
            </ul>
        </div>
    </nav>
    
    <main class="container">


================================================
FILE: views/admin/animal_create.php
================================================
<?php
// 1. EL GUARDIA DE SEGURIDAD
require '../../includes/auth_check.php';
require '../../includes/header.php';
require '../../config/db.php';

// 2. OBTENER LOS H√ÅBITATS PARA EL SELECT
// Necesitamos llenar el men√∫ desplegable con opciones reales de la BD.
try {
    // IMPORTANTE: Tu tabla usa 'nombre', no necesitamos cambiar esta consulta
    $stmt = $pdo->query("SELECT id, nombre FROM habitats");
    $habitats = $stmt->fetchAll(PDO::FETCH_ASSOC);
} catch (PDOException $e) {
    $error = "Error al cargar h√°bitats.";
}
?>

<div class="auth-container"> <div class="auth-card" style="max-width: 600px;"> <div class="admin-header">
            <h2>Registrar Nuevo Animal</h2>
            <a href="animals.php" class="btn-delete" style="background:#7f8c8d;">Cancelar</a>
        </div>

        <p>Completa los datos del nuevo integrante del zool√≥gico.</p>

        <?php if (isset($_SESSION['error'])): ?>
            <div class="alert alert-error">
                <?php echo $_SESSION['error']; unset($_SESSION['error']); ?>
            </div>
        <?php endif; ?>

        <form action="../../actions/animals/animal_create_action.php" method="POST" class="form-standard">
            
            <div class="form-group">
                <label>Nombre del Animal:</label>
                <input type="text" name="nombre" required placeholder="Ej: Simba">
            </div>

            <div class="form-group">
                <label>Especie:</label>
                <input type="text" name="especie" required placeholder="Ej: Le√≥n Africano">
            </div>

            <div class="row" style="display:flex; gap:15px;">
                <div class="form-group" style="flex:1;">
                    <label>Edad (A√±os):</label>
                    <input type="number" name="edad" required min="0">
                </div>
                
                <div class="form-group" style="flex:1;">
                    <label>Fecha de Llegada:</label>
                    <input type="date" name="fecha_llegada" required value="<?php echo date('Y-m-d'); ?>">
                </div>
            </div>

            <div class="form-group">
                <label>Asignar H√°bitat:</label>
                <select name="habitat_id" required>
                    <option value="">-- Selecciona un h√°bitat --</option>
                    
                    <?php foreach ($habitats as $h): ?>
                        <option value="<?php echo $h['id']; ?>">
                            <?php echo htmlspecialchars($h['nombre']); ?>
                        </option>
                    <?php endforeach; ?>
                    
                </select>
            </div>

            <button type="submit" class="btn-submit">Guardar Animal</button>
        </form>
    </div>
</div>

<?php require '../../includes/footer.php'; ?>


================================================
FILE: views/admin/animal_edit.php
================================================
<?php
require '../../includes/auth_check.php';
require '../../includes/header.php';
require '../../config/db.php';

// 1. OBTENER EL ANIMAL A EDITAR
$id = $_GET['id'] ?? null;
if (!$id) { header("Location: animals.php"); exit(); }

try {
    // Traemos los datos del animal
    $stmt = $pdo->prepare("SELECT * FROM animals WHERE id = ?");
    $stmt->execute([$id]);
    $animal = $stmt->fetch();

    // Traemos los h√É¬°bitats para el select
    $h_stmt = $pdo->query("SELECT id, nombre FROM habitats");
    $habitats = $h_stmt->fetchAll();

    if (!$animal) { die("Animal no encontrado."); }
} catch (PDOException $e) {
    die("Error: " . $e->getMessage());
}
?>

<div class="auth-container">
    <div class="auth-card" style="max-width: 600px;">
        <h2>Editar Animal: <?php echo htmlspecialchars($animal['nombre']); ?></h2>
        
        <form action="../../actions/animals/animal_update_action.php" method="POST" class="form-standard">
            <input type="hidden" name="id" value="<?php echo $animal['id']; ?>">

            <div class="form-group">
                <label>Nombre:</label>
                <input type="text" name="nombre" value="<?php echo htmlspecialchars($animal['nombre']); ?>" required>
            </div>

            <div class="form-group">
                <label>Especie:</label>
                <input type="text" name="especie" value="<?php echo htmlspecialchars($animal['especie']); ?>" required>
            </div>

            <div class="row" style="display:flex; gap:15px;">
                <div class="form-group" style="flex:1;">
                    <label>Edad:</label>
                    <input type="number" name="edad" value="<?php echo $animal['edad']; ?>" required>
                </div>
                <div class="form-group" style="flex:1;">
                    <label>Fecha Llegada:</label>
                    <input type="date" name="fecha_llegada" value="<?php echo $animal['fecha_llegada']; ?>" required>
                </div>
            </div>

            <div class="form-group">
                <label>H√É¬°bitat:</label>
                <select name="habitat_id" required>
                    <?php foreach ($habitats as $h): ?>
                        <option value="<?php echo $h['id']; ?>" <?php echo ($h['id'] == $animal['habitat_id']) ? 'selected' : ''; ?>>
                            <?php echo htmlspecialchars($h['nombre']); ?>
                        </option>
                    <?php endforeach; ?>
                </select>
            </div>

            <button type="submit" class="btn-submit" style="background:#f39c12;">Actualizar Datos</button>
            <a href="animals.php" style="display:block; text-align:center; margin-top:10px; color:#7f8c8d;">Volver atr√É¬°s</a>
        </form>
    </div>
</div>

<?php require '../../includes/footer.php'; ?>


================================================
FILE: views/admin/animals.php
================================================
Error reading file with 'cp1252': 'charmap' codec can't decode byte 0x90 in position 1109: character maps to <undefined>


================================================
FILE: views/auth/login.php
================================================
Error reading file with 'cp1252': 'charmap' codec can't decode byte 0x81 in position 1763: character maps to <undefined>


================================================
FILE: views/auth/register.php
================================================
<?php
// 1. Incluimos el header para mantener el men√É¬∫ y el dise√É¬±o 
// Usamos ../../ para subir dos niveles y encontrar la carpeta includes
require '../../includes/header.php';
?>

<div class="auth-container">
    <div class="auth-card">
        <h2>Registro de Personal</h2>
        <p>Crea una cuenta para acceder al sistema ZooManager.</p>

        <?php if (isset($_SESSION['error'])): ?>
            <div class="alert alert-error">
                <?php 
                    echo $_SESSION['error']; 
                    unset($_SESSION['error']); // Borramos el error para que no aparezca de nuevo al refrescar
                ?>
            </div>
        <?php endif; ?>

        <?php if (isset($_SESSION['success'])): ?>
            <div class="alert alert-success">
                <?php 
                    echo $_SESSION['success']; 
                    unset($_SESSION['success']); 
                ?>
            </div>
        <?php endif; ?>

        <form action="<?php echo BASE_URL; ?>actions/auth/register_action.php" method="POST" class="form-standard">
            
            <div class="form-group">
                <label for="nombre">Nombre Completo:</label>
                <input type="text" name="nombre_completo" id="nombre" required placeholder="Ej: Juan P√É¬©rez">
            </div>

            <div class="form-group">
                <label for="email">Correo Electr√É¬≥nico:</label>
                <input type="email" name="email" id="email" required placeholder="usuario@zool√É¬≥gico.com">
            </div>

            <div class="form-group">
                <label for="password">Contrase√É¬±a:</label>
                <input type="password" name="password" id="password" required minlength="6" placeholder="M√É¬≠nimo 6 caracteres">
            </div>

            <div class="form-group">
                <label for="rol">Rol Asignado:</label>
                <select name="rol" id="rol" required>
                    <option value="cuidador">Cuidador (Acceso limitado)</option>
                    <option value="admin">Administrador (Acceso total)</option>
                </select>
            </div>

            <button type="submit" class="btn-submit">Registrar Personal</button>
        </form>

        <p class="auth-link">√Ç¬øYa tienes una cuenta? <a href="login.php">Inicia sesi√É¬≥n aqu√É¬≠</a></p>
    </div>
</div>

<?php
// 3. Incluimos el footer para cerrar las etiquetas HTML
require '../../includes/footer.php';
?>

